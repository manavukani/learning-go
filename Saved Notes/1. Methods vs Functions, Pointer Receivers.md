
# Methods vs Functions

>A method is just a function with a special first argument called the receiver

- You can declare a method on non-struct types, too.
- You can only declare a method with a receiver whose type is defined in the **same package** as the method. You cannot declare a method with a receiver whose type is defined in another package (which includes the built-in types such as `int`) --- to prevent malicious/confusing methods to standard types

---

# Value Receiver vs Pointer Receiver

*Value receiver:*

```go
func (p Person) SayHi() {}
```
- `p` is a **copy**.
- Changes to `p` do **NOT** affect the original.

*Pointer receiver:*

```go
func (p *Person) Rename(newName string) {}
```
- `p` is a **pointer**.    
- Changes affect the **original struct**.

### How Pointer Receivers behaves differently with Methods vs Functions

- **Functions** with a pointer argument must take a pointer as input:

```go
var v Vertex
ScaleFunc(v, 5)  // Compile error!
ScaleFunc(&v, 5) // OK
```

while **methods** with pointer receivers take either a value or a pointer as the receiver when they are called:

```go
var v Vertex
v.Scale(5)  // OK
p := &v
p.Scale(10) // OK
```

> **==Auto-Dereference (ONLY for method calls)==**: Go makes calling methods easy

If a **method** has a **value receiver**, you can call it on:

- a value (`v.Abs()`)
- a pointer (`p.Abs()` → Go automatically dereferences)

If a **method** has a **pointer receiver**, you can call it on:

- a pointer (`p.Scale()`)
- a value (`v.Scale()` → Go automatically takes address)

**BUT — this only applies to _calling_ methods.**

### Use value receiver when:

✔️ The method **does not modify** the struct  
✔️ The struct is **small**  
✔️ You want the method to work on **both values and pointers**

Examples:

- `Distance()`, `Area()`, `ToString()`, `Copy()`
    

---

### Use pointer receiver when:

✔️ The method **modifies** the struct  
✔️ The struct contains **big data**  
✔️ You want to avoid copying large structs  
✔️ You need **interface satisfaction** (explained later)

Examples:

- `Move()`, `Scale()`, `Increment()`, `Decode()`

---

> Interfaces are a lil stricter than normal method calls
